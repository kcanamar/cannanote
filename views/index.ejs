<!DOCTYPE html>
<html lang="en">
<head>
<%- include('./partials/head.ejs')%>
    <title>CannaNote</title>
</head>
<body>
<%- include('./partials/nav.ejs') %>
    <div class="user-dash">
        <a href="/cannanote/new" class="create">Make a New Entry</a>
        <div class="new"></div>
    </div>
    <main>
        <% entries.forEach(entry => { %>
            <div class="entry-container">
                <fieldset>
                    <legend><a href=""><span class="username"><%=entry.username%></span></a> <span class="date"><%=entry.date.toDateString()%></span></legend>
                    <label for="strain">Strain: <span class="strain"><%= entry.strain%></span></label> <br>
                    <label for="description"> <span>What it was like: </span> <br>
                        <textarea name="description" id="" cols="100" rows="1" readonly style="resize:none"><%= entry.description%></textarea>
                    </label> <br>
                    <label for="favs"><span>Likes:</span> <%= entry.meta.favs%></label>
                    <form action="/cannanote/<%=entry._id%>/like?_method=PUT" method="POST">
                        <input type="hidden" name="favs" value="1">
                        <label for="likes"><input type="submit" value="Like"></label>
                    </form>
                        <label for="show"><a href="/cannanote/<%=entry._id%>" class="show">More</a></label>
                        <!-- todo looking for a way to properly compare and hidden functionality unless owned by the current User -->
                        <label for="edit"><a href="/cannanote/<%=entry._id%>/edit" class="edit" <%# hidden() %>>Edit</a></label>
                    <form action="/cannanote/<%=entry._id%>?_method=DELETE" method="POST" <%# hidden() %>>
                        <label for="delete"><input type="submit" value="Delete"></label>
                    </form>
                </fieldset>
            </div>
        <% })%>
    </main>
</body>
</html>